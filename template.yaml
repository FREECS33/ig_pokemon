AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: >
  pokemon_ig

  Sample SAM Template for pokemon_ig

Globals:
  Function:
    Timeout: 3

Resources:
  GetPokemonFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: get_data_all_pokemon/
      Handler: app.lambda_handler
      Runtime: python3.12
      Architectures:
        - x86_64
      Events:
        GetPokemon:
          Type: Api
          Properties:
            Path: /get_pokemon
            Method: get

  GetOnePokemonFuncton:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: get_publication/
      Handler: app.lambda_handler
      Runtime: python3.12
      Architectures:
        - x86_64
      Events:
        GetOnePokemon:
          Type: Api
          Properties:
            Path: /get_one_pokemon
            Method: get

  AddPokemonFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: post_publication/
      Handler: app.lambda_handler
      Runtime: python3.12
      Architectures:
        - x86_64
      Events:
        AddPokemon:
          Type: Api
          Properties:
            Path: /add_pokemon
            Method: post

  UpdatePokemonFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: update_publication/
      Handler: app.lambda_handler
      Runtime: python3.12
      Architectures:
        - x86_64
      Events:
        UpdatePokemon:
          Type: Api
          Properties:
            Path: /update_pokemon
            Method: put

Outputs:
  GetPokemonApi:
    Description: "API Gateway endpoint URL for GetPokemon function"
    Value: !Sub "https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/get_pokemon/"

  AddPokemonApi:
    Description: "API Gateway endpoint URL for AddPokemon function"
    Value: !Sub "https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/add_pokemon/"

  UpdatePokemonApi:
    Description: "API Gateway endpoint URL for UpdatePokemon function"
    Value: !Sub "https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/update_pokemon/"

  GetPokemonFunction:
    Description: "Get Pokemon Lambda Function ARN"
    Value: !GetAtt GetPokemonFunction.Arn

  AddPokemonFunction:
    Description: "Add Pokemon Lambda Function ARN"
    Value: !GetAtt AddPokemonFunction.Arn

  UpdatePokemonFunction:
    Description: "Update Pokemon Lambda Function ARN"
    Value: !GetAtt UpdatePokemonFunction.Arn

  GetPokemonFunctionIamRole:
    Description: "Implicit IAM Role created for Get Pokemon function"
    Value: !GetAtt GetPokemonFunctionRole.Arn

  AddPokemonFunctionIamRole:
    Description: "Implicit IAM Role created for Add Pokemon function"
    Value: !GetAtt AddPokemonFunctionRole.Arn

  UpdatePokemonFunctionIamRole:
    Description: "Implicit IAM Role created for Update Pokemon function"
    Value: !GetAtt UpdatePokemonFunctionRole.Arn
